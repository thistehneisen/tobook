(function(){$(function(){"use strict";var t,n,e,a,r,o,i,l,c;return n=$(document),l=$("#js-queryInput"),i=$("#js-locationInput"),null!=l&&null!=i&&l.length>0&&i.length>0&&(VARAA.initTypeahead(l,"services"),VARAA.initTypeahead(i,"locations")),e=$("#main-search-form"),e.length&&(r=e.find("[name=lat]"),o=e.find("[name=lng]"),c=!(r.val().length>0&&o.val().length>0),l.on("focus",function(){var t;if(navigator.geolocation&&c)return t=$("#js-geolocation-info"),c&&t.show(),VARAA.getLocation().then(function(t,n){return r.val(t),o.val(n)}),c=!1})),a=$("#js-languageSwitcher"),a.change(function(){return window.location=this.value}),t=$("#header-cart"),t.popover({placement:"bottom",trigger:"click",html:!0}),n.on("click",function(n){var e;e=$(n.target),"popover"!==e.data("toggle")&&0===e.parents("#header-cart").length&&0===e.parents(".popover.in").length&&t.popover("hide")}),n.on("cart.reload",function(e,a){return $.ajax({url:t.data("cart-url"),dataType:"JSON"}).done(function(e){return t.find(".content").html(e.totalItems),t.attr("data-content",e.content),a?(t.popover("show"),n.scrollTop(0)):void 0})}),n.on("click","a.js-btn-cart-remove",function(t){var e;return t.preventDefault(),e=$(this),e.find("i.fa").removeClass("fa-close").addClass("fa-spinner fa-spin"),$.ajax({url:e.attr("href")}).done(function(){return $("tr.cart-detail-"+e.data("detail-id")).fadeOut(),n.trigger("cart.reload",!0)})}),n.trigger("cart.reload",!1)})}).call(this);