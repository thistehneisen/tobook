(function(){var e,t;e=function(){function e(e){this.businesses=e.businesses,this.lat=e.lat,this.lng=e.lng,null!=e.categoryId&&(this.categoryId=e.categoryId),null!=e.serviceId&&(this.serviceId=e.serviceId),null!=e.employeeId&&(this.employeeId=e.employeeId),null!=e.time&&(this.time=e.time)}return e.prototype.run=function(){return this.categoryId&&this.serviceId&&this.selectBookingForm(),this.showBusinesses()},e.prototype.selectBookingForm=function(){return $("input:radio[name=category_id][value="+this.categoryId+"], input:radio[name=service_id][value="+this.serviceId+"]").click(),$("input[name=service_id]").on("afterSelect",function(){return $("input:radio[name=employee_id][value="+this.employeeId+"]").click()}),$("#as-step-3").on("afterShow",function(){return $("button[data-time="+this.time+"]").click()})},e.prototype.renderMap=function(e,t,s,i){var n,r,a,o;if(n=new GMaps({div:e,lat:t,lng:s,zoom:8}),null!=i)for(r=0,a=i.length;a>r;r++)o=i[r],n.addMarkers(i);return n},e.prototype.showBusinesses=function(){var e,t,s,i,n,r;return r=this,t=$("#js-loading"),e=$("#js-business-list"),s=$("#js-map-canvas"),i=$("#js-business-single"),s.show(),n=this.extractMarkers(this.businesses),this.renderMap(s.attr("id"),this.lat,this.lng,n),$("div.js-business").on("click",function(s){var n,a;return n=$(this),a=n.data("id"),s.preventDefault(),$(window).width()<768?void(window.location=n.data("url")):e.data("current-business-id")===a?!0:($("div.js-business").removeClass("selected"),n.addClass("selected"),t.show(),$.ajax({url:n.data("url"),type:"GET"}).done(function(s){var n,o,l;return t.hide(),e.hide(),i.html(s),VARAA.initLayout3(),e.data("current-business-id",a),n=$("#js-map-"+a),console.log("#js-map-"+a,n),o=n.data("lat"),l=n.data("lng"),r.renderMap(n.attr("id"),o,l,[{lat:o,lng:l}])}))})},e.prototype.extractMarkers=function(e){var t,s,i,n;for(n=[],s=0,i=e.length;i>s;s++)t=e[s],n.push({lat:t.lat,lng:t.lng,title:t.name});return n},e}(),t=new e(VARAA.Search),t.run()}).call(this);