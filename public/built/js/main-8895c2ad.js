(function(){$(function(){"use strict";var t,n,e,o,a,r,i,c,l,u;return n=$(document),c=$("#js-queryInput"),i=$("#js-locationInput"),o=$("#js-languageSwitcher"),t=$("#header-cart"),l=function(t,n){var e;return e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:{url:"/search/"+n+".json",filter:function(t){return"string"==typeof t[0]?$.map(t,function(t){return{name:t}}):t}}}),e.clearPrefetchCache(),e.initialize(),t.typeahead({highlight:!0,hint:!0},{name:n,displayKey:"name",source:e.ttAdapter()})},c.length&&i.length&&(l(c,"services"),l(i,"locations")),e=$("#main-search-form"),a=e.find("[name=lat]"),r=e.find("[name=lng]"),console.log(a.val(),r.val()),u=!(a.val().length>0&&r.val().length>0),c.on("focus",function(){var t,n,e;if(navigator.geolocation&&u)return t=$("#js-geolocation-info"),t.slideDown(),e=function(n){return a.val(n.coords.latitude),r.val(n.coords.longitude),t.slideUp()},n=function(t){return console.log(t)},navigator.geolocation.getCurrentPosition(e,n,{timeout:1e4}),u=!1}),o.change(function(){return window.location=this.value}),t.popover({placement:"bottom",trigger:"click",html:!0}),n.on("click",function(n){var e;return e=$(n.target),e.data(!0&&0===e.parents("#header-cart").length&&0===e.parents(".popover.in").length)?t.popover("hide"):void 0}),n.on("cart.reload",function(e,o){return $.ajax({url:t.data("cart-url"),dataType:"JSON"}).done(function(e){return t.find(".content").html(e.totalItems),t.attr("data-content",e.content),o?(t.popover("show"),n.scrollTop(0)):void 0})}),n.on("click","a.js-btn-cart-remove",function(t){var e;return t.preventDefault(),e=$(this),e.find("i.fa").removeClass("fa-close").addClass("fa-spinner fa-spin"),$.ajax({url:e.attr("href")}).done(function(){return $("tr.cart-detail-"+$this.data("detail-id")).fadeOut(),n.trigger("cart.reload",!0)})}),n.trigger("cart.reload",!1),VARAA.applyCountdown=function(t){return t.each(function(){var t;return t=$(this),t.countdown({until:new Date(t.data("date")),compact:!0,layout:"{hnn}{sep}{mnn}{sep}{snn}"})})},VARAA.equalize=function(t){var n;return n=0,$(t).each(function(){var t;return t=$(this).outerHeight(),t>n?n=t:void 0}).css("height",n)}})}).call(this);