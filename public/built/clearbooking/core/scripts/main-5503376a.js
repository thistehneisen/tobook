(function(){$(function(){"use strict";var t,n,e,o,r,a,i,c,l,u;return n=$(document),c=$("#js-queryInput"),i=$("#js-locationInput"),l=function(t,n){var e;return e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:{url:"/search/"+n+".json",filter:function(t){return"string"==typeof t[0]?$.map(t,function(t){return{name:t}}):t}}}),e.clearPrefetchCache(),e.initialize(),t.typeahead({highlight:!0,hint:!0},{name:n,displayKey:"name",source:e.ttAdapter()})},null!=c&&null!=i&&c.length>0&&i.length>0&&(l(c,"services"),l(i,"locations")),e=$("#main-search-form"),e.length&&(r=e.find("[name=lat]"),a=e.find("[name=lng]"),u=!(r.val().length>0&&a.val().length>0),c.on("focus",function(){var t,n,e;if(navigator.geolocation&&u)return t=$("#js-geolocation-info"),u&&t.show(),e=function(t){return r.val(t.coords.latitude),a.val(t.coords.longitude)},n=function(t){return console.log(t)},navigator.geolocation.getCurrentPosition(e,n,{timeout:1e4}),u=!1})),o=$("#js-languageSwitcher"),o.change(function(){return window.location=this.value}),t=$("#header-cart"),t.popover({placement:"bottom",trigger:"click",html:!0}),n.on("click",function(n){var e;e=$(n.target),"popover"!==e.data("toggle")&&0===e.parents("#header-cart").length&&0===e.parents(".popover.in").length&&t.popover("hide")}),n.on("cart.reload",function(e,o){return $.ajax({url:t.data("cart-url"),dataType:"JSON"}).done(function(e){return t.find(".content").html(e.totalItems),t.attr("data-content",e.content),o?(t.popover("show"),n.scrollTop(0)):void 0})}),n.on("click","a.js-btn-cart-remove",function(t){var e;return t.preventDefault(),e=$(this),e.find("i.fa").removeClass("fa-close").addClass("fa-spinner fa-spin"),$.ajax({url:e.attr("href")}).done(function(){return $("tr.cart-detail-"+e.data("detail-id")).fadeOut(),n.trigger("cart.reload",!0)})}),n.trigger("cart.reload",!1),VARAA.applyCountdown=function(t){return t.each(function(){var t;return t=$(this),t.countdown({until:new Date(t.data("date")),compact:!0,layout:"{hnn}{sep}{mnn}{sep}{snn}"})})},VARAA.equalize=function(t){var n;return n=0,$(t).each(function(){var t;return t=$(this).outerHeight(),t>n?n=t:void 0}).css("height",n)}})}).call(this);