(function(){!function(t){"use strict";return t(function(){var n,e,o,r,a,i,l;return e=t("#form-search"),a=e.find("[name=q]"),o=e.find("[name=location]"),r=t("#location-dropdown-wrapper"),l=function(n){return t(n.target).tooltip("hide")},a.on("focus",l),o.on("focus",l),o.on("focus",function(){return r.addClass("open")}).on("blur",function(n){var e;return e=n.relatedTarget&&t(n.relatedTarget).hasClass("form-search-city"),e?void 0:r.removeClass("open")}),e.on("submit",function(t){var n,r,i;return e.data("bypass")===!0?!0:(t.preventDefault(),n=function(){return e.data("bypass",!0),e.submit()},i=0===a.val().length,r=0===o.val().length,i&&a.tooltip("show"),r&&o.tooltip("show"),r||i?void 0:o.data(!1)?VARAA.getLocation().then(function(t,n){return e.find("[name=lat]").val(t),e.find("[name=lng]").val(n)}).always(n):n())}),t("a.form-search-city").on("click",function(n){var e;return n.preventDefault(),e=t(this),o.attr("data-current-location",e.data("current-location")),o.val(e.text()),r.removeClass("open")}),a.length>0&&VARAA.initTypeahead(a,"services"),a.bind("typeahead:selected",function(t,n){return"undefined"!=typeof n.url?window.location=n.url:void 0}),t("#js-navbar").find("a").on("click",function(n){var e,o,r,a,i,l;return n.preventDefault(),e=t(this),o=t("body"),a=o.data("lat"),i=o.data("lng"),null!=a&&null!=i&&""!==a&&""!==i?window.location=e.prop("href"):(l=function(n){return a=n.coords.latitude,i=n.coords.longitude,t.ajax({url:o.data("geo-url"),type:"POST",data:{lat:a,lng:i}}).done(function(){return window.location=e.prop("href")})},r=function(){return window.location=e.prop("href")},navigator.geolocation.getCurrentPosition(l,r,{timeout:1e4}))}),t("div.datetime-control").each(function(n,e){return t(e).datetimepicker({format:t(this).data("format"),inline:!0,stepping:15})}),t(".datetime-link").on("click",function(t){return t.preventDefault()}).on("focus",function(n){return n.preventDefault(),t(this).siblings(".datetime-control").show()}).on("blur",function(n){return n.preventDefault(),t(this).siblings(".datetime-control").hide()}),t("#js-choose-category").on("click",function(n){return n.preventDefault(),t.scrollTo("#js-home-categories",{duration:1e3})}),i=function(n,e){var o,r,a,i;return o=n.find("li:not(.toggle):lt("+e+")"),a=n.find("li:not(.toggle):gt("+(e-1)+")"),i=n.find(".toggle"),r=n.find(".more"),o.show(),a.length>0&&r.show(),i.on("click",function(n){var e;return n.preventDefault(),e=t(this),a.slideToggle(),e.hide(),e.siblings(".toggle").show()})},t("ul.list-categories").each(function(n,e){return i(t(e),3)}),i(t("#js-category-filter"),6),n=t(".js-deal"),t("a.js-filter-link").on("click",function(e){var o,r;return e.preventDefault(),r=t(this),r.toggleClass("active"),o=t("a.js-filter-link.active"),o.length?(n.hide(),o.each(function(n,e){var o,r,a;return o=t(e),a=o.data("id"),r=t(".js-deal-category-"+a),r.fadeIn()})):n.show()})})}(jQuery)}).call(this);