(function(){"use strict";var t;String.prototype.format||(String.prototype.format=function(){var t;return t=arguments,this.replace(/\{(\d+)\}/g,function(e,o){return void 0!==t[o]?t[o]:e})}),String.prototype.routeformat||(String.prototype.routeformat=function(){var t;return t=arguments,this.replace(/\{(\w+)\}/g,function(e,o){return void 0!==t[0][o]?t[0][o]:e})}),VARAA.routes=VARAA.routes||{},VARAA.addRoute=function(t,e){VARAA.routes[t]=unescape(e)},VARAA.getRoute=function(t,e){var o;return o=VARAA.routes[t],void 0!==o?void 0===e?o:o.routeformat(e):void console.log('Error getting route "{0}"'.format(t))},t=$("body"),VARAA.currentLocale=t.data(!0)?t.data("locale"):"en",VARAA._i18n={},$.getJSON(t.data("js-locale"),function(t){VARAA._i18n=t}),VARAA.trans=function(t){return VARAA._i18n.hasOwnProperty(t)?VARAA._i18n[t]:t},VARAA.regex_email_validation=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,VARAA.getLocation=function(){var t,e,o;return e=$.Deferred(),o=function(t){var o,r;return o=t.coords.latitude,r=t.coords.longitude,$.ajax({url:VARAA.routes.updateLocation,type:"POST",data:{lat:o,lng:r}}).done(function(){return e.resolve(o,r)})},t=function(t){return console.log(t)},navigator.geolocation.getCurrentPosition(o,t,{timeout:1e4}),e.promise()},VARAA.initTypeahead=function(t,e){var o;o=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:{url:"/search/"+e+".json",filter:function(t){return"string"==typeof t[0]?$.map(t,function(t){return{name:t}}):t}}}),o.clearPrefetchCache(),o.initialize(),t.typeahead({highlight:!0,hint:!0},{name:e,displayKey:"name",source:o.ttAdapter()})}}).call(this);