(function(){"use strict";var t;String.prototype.format||(String.prototype.format=function(){var t;return t=arguments,this.replace(/\{(\d+)\}/g,function(e,r){return void 0!==t[r]?t[r]:e})}),String.prototype.routeformat||(String.prototype.routeformat=function(){var t;return t=arguments,this.replace(/\{(\w+)\}/g,function(e,r){return void 0!==t[0][r]?t[0][r]:e})}),VARAA.routes=VARAA.routes||{},VARAA.addRoute=function(t,e){VARAA.routes[t]=unescape(e)},VARAA.getRoute=function(t,e){var r;return r=VARAA.routes[t],void 0!==r?void 0===e?r:r.routeformat(e):void console.log('Error getting route "{0}"'.format(t))},t=$("body"),VARAA.currentLocale=t.data(!0)?t.data("locale"):"en",VARAA._i18n={},$.getJSON(t.data("js-locale"),function(t){VARAA._i18n=t}),VARAA.trans=function(t){return VARAA._i18n.hasOwnProperty(t)?VARAA._i18n[t]:t},VARAA.regex_email_validation=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,VARAA.getLocation=function(){var t,e,r;return e=$.Deferred(),r=function(t){var r,o;return r=t.coords.latitude,o=t.coords.longitude,$.ajax({url:VARAA.routes.updateLocation,type:"POST",data:{lat:r,lng:o}}).done(function(){return e.resolve(r,o)})},t=function(t){return e.reject(t)},navigator.geolocation.getCurrentPosition(r,t,{timeout:1e4}),e.promise()},VARAA.initTypeahead=function(t,e){var r;return r=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:{url:t.data("data-source")}}),r.clearPrefetchCache(),r.initialize(),t.typeahead({highlight:!0,hint:!0},{name:e,displayKey:"name",source:r.ttAdapter(),templates:{suggestion:function(t){return"<div data-url="+t.url+">"+t.name+"</div>"}}})}}).call(this);